# Sirius production/local-prod compose environment template
# Copy to .env (or export these vars in your shell) before:
# docker compose -f docker-compose.yaml -f docker-compose.prod.yaml up -d

# Optional image tag. Use latest or a release tag like v1.0.0
IMAGE_TAG=v1.0.0

# Required shared API key for sirius-ui, sirius-api, and sirius-engine
SIRIUS_API_KEY=change-me-long-random-api-key

# Required database credentials
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me-strong-db-password
POSTGRES_DB=sirius
POSTGRES_HOST=sirius-postgres
POSTGRES_PORT=5432

# UI auth settings (required secret)
NEXTAUTH_SECRET=change-me-long-random-nextauth-secret
NEXTAUTH_URL=http://localhost:3000

# API and browser API URLs
SIRIUS_API_URL=http://sirius-api:9001
NEXT_PUBLIC_SIRIUS_API_URL=http://localhost:9001

# API service settings
GO_ENV=production
API_PORT=9001
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://sirius.local

# Engine settings
ENGINE_MAIN_PORT=5174
GRPC_AGENT_PORT=50051
API_BASE_URL=http://sirius-api:9001
# Host discovery in prod overlay requires NET_RAW on sirius-engine
# (configured in docker-compose.prod.yaml)

# Infrastructure endpoints
VALKEY_HOST=sirius-valkey
VALKEY_PORT=6379
RABBITMQ_URL=amqp://guest:guest@sirius-rabbitmq:5672/

# Validation quick checks after startup:
# - valkey-cli GET template:quick (must include "fingerprint" in scan_types)
# - rabbitmqctl list_queues name consumers messages_ready messages_unacknowledged
# - valkey-cli GET currentScan
